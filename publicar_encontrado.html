<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Publicar Animal Encontrado</title>
  <style>
      * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
    
      color: #333;
    }

    /* Cabeçalho */
    header {
      background-color: #ff751a;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      z-index: 10;
    }

    header h1 {
      font-family: 'Fredoka One', sans-serif;
      color: white;
      font-size: 2rem;
      margin: 0;
    }

    .hamburger {
      cursor: pointer;
      display: none;
      flex-direction: column;
      gap: 5px;
    }

    .hamburger span {
      width: 25px;
      height: 3px;
      background-color: white;
      border-radius: 2px;
    }

    nav {
      display: flex;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 20px;
      margin: 0;
      padding: 0;
    }

    nav a {
      font-family: 'Fredoka One', sans-serif;
      color: white;
      text-decoration: none;
      font-weight: 500;
    }

    @media screen and (max-width: 768px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }

      .hamburger {
        display: flex;
      }

      nav {
        position: absolute;
        top: 60px;
        left: 0;
        width: 100%;
        background-color: #ff6600;
        display: none;
        flex-direction: column;
        z-index: 100;
      }

      nav.active {
        display: flex;
      }

      nav ul {
        flex-direction: column;
        padding: 10px 0;
      }

      nav li {
        padding: 10px 20px;
      }
    }

    .form-container {
      background-color: white;
      max-width: 500px;
      margin: 50px auto;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
      color: #ff6600;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    .botoes {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    button {
      padding: 10px 20px;
      background-color: #ff6600;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #e65c00;
    }
  </style>
</head>
<body>
  <header>
  <h1>🐾 PetFinder</h1>
  <div id="hamburger" class="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <nav id="nav-menu">
    <ul>
        <li><a href="index.html">Página Inicial</a></li>
        <li><a href="animais_encontra.html">Encontrados</a></li>
        <li><a href="adocao.html" target="_blank">Adoção</a></li>
        <li><a href="#">Dicas</a></li>
        <li><a href="cadastrados.html">Cadastrados</a></li>
        <li><a href="contato.html">Contato</a></li>
    </ul>
  </nav>
</header>
  <div class="form-container">
    <h2>🐾 Publicar Animal Encontrado</h2>
 <form id="formPet">

      <label for="nome">Nome (se conhecido):</label>
      <input type="text" id="nome" name="nome" placeholder="Ex: Bob, Luna">

      <label for="tipo">Tipo de Animal:</label>
      <select id="tipo" name="tipo">
        <option value="cachorro">Cachorro</option>
        <option value="gato">Gato</option>
        <option value="outro">Outro</option>
      </select>

      <label for="descricao">Descrição:</label>
      <textarea id="descricao" name="descricao" rows="4" placeholder="Ex: pequeno, assustado, coleira azul..."></textarea>

      <label for="local">Local Encontrado:</label>
      <input type="text" id="local" name="local" placeholder="Ex: Rua das Flores, Praça Central">

      <label for="data">Data:</label>
      <input type="date" id="data" name="data">

      <label for="foto">Foto do Animal:</label>
      <input type="file" id="foto" name="foto" accept="image/*">

      <label for="contato">Contato:</label>
      <input type="text" id="contato" name="contato" placeholder="Ex: (00) 0000-0000">

      <label for="whatsapp">WhatsApp:</label>
<input type="text" id="whatsapp" name="whatsapp" placeholder="Ex: 7399847372">

      <div class="botoes">
        <button type="submit">Publicar</button>
        <button type="reset">Cancelar</button>
      </div>
    </form>
  </div>
  <footer style="background-color: #ff914d; color: white; padding: 30px 0; font-family: 'Segoe UI', sans-serif;">
  <div style="max-width: 1000px; margin: auto; text-align: center;">
    <h3 style="margin-bottom: 10px;">🐶 PetFinder</h3>
    <p style="margin-bottom: 20px;">Conectando pets incríveis a lares amorosos 💕</p>
    
    <div style="margin-bottom: 20px;">
      <a href="https://www.instagram.com/seuusuario" target="_blank" style="margin: 0 15px;">
        <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram" width="32" height="32">
      </a>
      <a href="https://www.facebook.com/seuusuario" target="_blank" style="margin: 0 15px;">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook" width="32" height="32">
      </a>
    </div>

    <nav style="margin-bottom: 15px;">
      <a href="index.html" style="color: white; margin: 0 10px; text-decoration: none;">Página Inicial</a> |
      <a href="adocao.html" style="color: white; margin: 0 10px; text-decoration: none;">Adoção</a> |
      <a href="dicas.html" style="color: white; margin: 0 10px; text-decoration: none;">Cuidados</a> |
      <a href="contato.html" style="color: white; margin: 0 10px; text-decoration: none;">Contato</a>
    </nav>

    <p style="font-size: 14px;">© 2025 PetFinder. Todos os direitos reservados.</p>
  </div>
</footer>

<script>
 document.addEventListener('DOMContentLoaded', () => {
    // Menu responsivo
    const hamburger = document.getElementById('hamburger');
    const nav = document.getElementById('nav-menu');
    hamburger.addEventListener('click', () => nav.classList.toggle('active'));

    // IndexedDB setup
    let db = null;
    let bancoPronto = false;

    const dbRequest = indexedDB.open('PetFinderDB', 1);

    dbRequest.onupgradeneeded = function(event) {
      db = event.target.result;
      if (!db.objectStoreNames.contains('petsEncontrados')) {
        db.createObjectStore('petsEncontrados', { keyPath: 'id' });
      }
    };

    dbRequest.onsuccess = function(event) {
      db = event.target.result;
      bancoPronto = true;
    };

    dbRequest.onerror = function() {
      alert('Erro ao abrir o banco de dados.');
    };

    // Formulário de publicação
    const form = document.getElementById('formPet');
    form.addEventListener('submit', function(e) {
      e.preventDefault();

      if (!bancoPronto || !db) {
        alert('Erro ao acessar o banco de dados. Tente recarregar a página.');
        return;
      }

      const pet = {
        id: 'encontrado-' + Date.now(),
        nomePet: document.getElementById('nome').value.trim(),
        tipoPet: document.getElementById('tipo').value,
        descricaoPet: document.getElementById('descricao').value.trim(),
        localizacao: document.getElementById('local').value.trim(),
        dataEncontrado: document.getElementById('data').value,
        contato: document.getElementById('contato').value.trim(),
        whatsapp: document.getElementById('whatsapp').value.trim()
      };

      const foto = document.getElementById('foto').files[0];
      if (foto) {
        const reader = new FileReader();
        reader.onload = function(e) {
          pet.fotoPet = e.target.result;
          salvarPet(pet);
        };
        reader.onerror = function() {
          alert('Erro ao carregar a imagem.');
        };
        reader.readAsDataURL(foto);
      } else {
        pet.fotoPet = '';
        salvarPet(pet);
      }

      function salvarPet(pet) {
        try {
          const tx = db.transaction('petsEncontrados', 'readwrite');
          const store = tx.objectStore('petsEncontrados');
          store.put(pet);

          tx.oncomplete = () => {
            alert('Animal publicado com sucesso!');
            window.location.href = 'animais_encontra.html';
          };

          tx.onerror = () => {
            alert('Erro ao salvar o animal. Verifique os dados e tente novamente.');
          };
        } catch (err) {
          console.error('Erro na transação:', err);
          alert('Erro ao acessar o banco de dados. Tente recarregar a página.');
        }
      }
    });
  });

</script>

</body>
</html>